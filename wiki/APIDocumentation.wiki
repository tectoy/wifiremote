#summary This page describes the messages a client can send to or receive from the plugin.
#labels Phase-Implementation,Featured

= API Documentation =

If you want your client to use WifiRemote to remote control MediaPortal you have to understand the "language" the plugin communicates in.

<wiki:toc max_depth="3" />


The WifiRemote language consists of small JSON messages.
A message always consists of a "Type" field (string), which identifies what kind of message is sent.
This is a list of all messages a client can send to WifiRemote and messages WifiRemote sends to the client.


----


== Messages from WifiRemote to the client ==

=== welcome ===
The welcome message is sent to every client (socket) that connects to WifiRemote. It contains information about the plugin and about the current status of MediaPortal.

==== Fields ====
  * Type (string): Type of the message, always "welcome"
  * Server_Version (int): Version of the server. A client can require a certain version of the server, to make sure all required features are supported by the plugin.
  * Status (object): This field contains a [APIDocumentation#status Status message]. See below.
  * Volume (object): This field contains a [APIDocumentation#volume Volume message]. See below.

Example:
{{{
{
  "Type":"welcome",
  "Server_Version":2,
  "Status":{
    "Type":"status",
    "IsPlaying":false,
    "IsPaused":false,
    "Title":"",
    "CurrentModule":"Homescreen",
    "SelectedItem":"Music"
  },
  "Volume":{
    "Type":"volume",
    "Volume":100,
    "IsMuted":false"
  }
}
}}}


=== status ===
Describes the current status of MediaPortal, consisting of player and navigation related information.
This is sent when the status changes (a file starts/stops playing, the user navigates in MediaPortal) and integrated in the [APIDocumentation#welcome welcome message].

==== Fields ====
  * Type (string): Type of the message, always "status"
  * IsPlaying (boolean): true if MediaPortal is playing a file, false otherwise
  * IsPaused (boolean): true if MediaPortal is playing a file but it is paused, false otherwise
  * Title (string): Title of the currently played media file (for example "Hot Fuzz")
  * CurrentModule (string): Currently active module (for example "TV Series")
  * SelectedItem (string): Selected item in the skin. This is working a bit flaky at the moment. (for example: "Switch view")

Example:
{{{
{
  "Type":"status",
  "IsPlaying":false,
  "IsPaused":false,
  "Title":"",
  "CurrentModule":"Homescreen",
  "SelectedItem":"Music"
}
}}}



=== volume ===
A message containing information about MediaPortals volume.
This is sent when there was a change in volume and integrated in the [APIDocumentation#welcome welcome message].

==== Fields ====
  * Type (string): Type of the message, always "volume"
  * Volume (int): Volume set in MediaPortal in percent (0 - 100)
  * IsMuted (boolean): true if the sound in MediaPortal is muted, false otherwise

Example:
{{{
{
  "Type":"volume",
  "Volume":100,
  "IsMuted":false"
}
}}}



=== plugins ===
The plugins message is sent in response to a [APIDocumentation#requestplugins requestplugins message]. 
It contains a list of all installed and active window plugins in MediaPortal including the plugin name, the icon as byte array and the window id of the plugin

==== Fields ====
  * Type (string): Type of the message, always "plugins"
  * Plugins (array): An array, containing one object per plugin with these fields:
    * Name (string): Name of the plugin in the same language as configured in MediaPortal
    * WindowId (int): Window ID of the plugin. This can be used to activate the plugin via the [APIDocumentation#window window message].
    * Icon (string): This string is a byte-array representation of the plugin icon png file. In the example it is cut to see what's going on. In your client you can get the image from this string and display it.

Example:
{{{
{
  "Type":"plugins",
  "Plugins":[
    {
      "Name":"Play Disc",
      "WindowId":3001,
      "Icon":"iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQAAAAgHBwsLCxgYGCYmJjAvMDc3N0pJSlBPUFZVVmloaXh4eImJiZaWlpmsvpqytJuwvZ+5sZ+4vaSjpKqkqaurq6+rsKS7rqq8pqm8qqa0vaO5s6C4u6q3uai5vLGqr7yvq7OnsrKrsrqsu7K9pr60q7u/pL64rbOys7W8tLW+vLy2s7qzur65tL29vZurwpuzwaOrxauqw6C3yaW+xqa7z6y0xK+5xaa60au61LSswrqtw7O1xLS7wbq0wry0zL2+wLC917S82Lu51Li82KXAqqvBpqrAq6bBvarEu63KuLLDpLLDrbfIpbDJrbvDpLvEq7/LpL3Lq7…"
    },
    {
      "Name":"Moving Pictures",
      "WindowId":12345,
      "Icon":"…"
    }
  ]
}
}}}